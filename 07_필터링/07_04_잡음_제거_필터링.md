## 영상과 잡음 모델
* 신호 처리 관점에서 잡음(noise)이란 원본 신호에 추가된 원치 않은 신호를 의미
* 영상에서 잡음은 주로 영상을 획득하는 과정에서 발생하며, 디지털 카메라에서 사진을 촬영하는 경우에는 광학적 신호를 전기적 신호로 변환하는 센서(sensor)에서 주로 잡음이 추가
* <img src="./img/OCV027.PNG" /> <br/> 디지털 카메라에서 카메라 렌즈가 바라보는 장면을 원본 신호 s(x, y)라고 하고, 여기에 추가되는 잡음을 n(x, y)라고 표현한다면 실제로 카메라에서 획득되는 영상 신호 f(x, y)는 그림과 같은 수식으로 표현
* 잡음이 생성되는 방식을 잡음 모델(noise model)이라고 하며, 다양한 잡음 모델 중에서 가장 대표적인 잡음 모델은 가우시안 잡음 모델(Gaussian noise model)
* 가우시안 잡음 모델은 보통 평균이 0인 가우시안 분포를 따르는 잡음을 의미
* <img src="./img/OCV028.PNG" /> <br/> 가우시안 분포 그래프는 다음과 같음 <br/> 평균이 0이고 표준 편차가 σ인 가우시안 분포는 x 값이 -σ≤x≤σ 구간에서 전체 데이터의 68%가 존재하고, -2σ≤x≤2σ 구간에는 95%, -3σ≤x≤3σ 구간에는 99.7%가 존재
<br/> 평균이 0이고 표준 편차가 10인 가우시안 분포를 따르는 잡음 모델은 68%의 확률로 -10에서 10 사이의 값이 잡음으로 추가되고, 잡음 값이 -20부터 20 사이일 확률은 95%이며, 그 밖의 값이 잡음으로 추가될 확률은 5%
* <img src="./img/OCV029.PNG" /> <br/> randn() 함수를 이용하여 영상에 가우시안 모델을 따르는 잡음을 인위적으로 추가 <br/> randn() 함수는 가우시안 잡음으로 구성된 행렬을 생성하여 반환 <randn() 함수는 dst 행렬을 가우시안 분포를 따르는 난수로 채움
```cpp
// 가우시안 잡음 추가 코드
void noise_gaussian()
{
	Mat src = imread("lenna.bmp", IMREAD_GRAYSCALE);

	if (src.empty())
	{
		cerr << "Image load failed!" << endl;
		return;
	}

	imshow("src", src);

	// 표준 편차 stddev 값이 10, 20, 30이 되도록 for 반복문을 수행
	for (int stddev = 10; stddev <= 30; stddev += 10)
	{
		Mat noise(src.size(), CV_32SC1);
		randn(noise, 0, stddev);

		Mat dst;
		add(src, noise, dst, Mat(), CV_8U);

		String desc = format("stddev = %d", stddev);
		putText(dst, desc, Point(10, 30), FONT_HERSHEY_SIMPLEX, 1.0, Scalar(255));

		String title = format("dst%d", stddev/10);
		imshow(title, dst);
	}

	waitKey(0);

	destroyAllWindows();
}
```
* 코드 결과 <br/> <img src="./img/OCV030.PNG" /> <br/> 표준 편차 stddev 값이 증가함에 따라 잡음의 영향이 커지므로 결과 영상이 더욱 지저분해 짐

## 양방향 필터 
* 대부분의 영상에는 가우시안 잡음이 포함되어 있으며 많은 컴퓨터 비전 시스템이 가우시안 잡음을 제거하기 위해 가우시안 필터를 사용
* 입력 영상에서 픽셀 값이 크게 변하지 않는 평탄한 영역에 가우시안 필터가 적용될 경우, 주변 픽셀 값이 부드럽게 블러링되면서 잡음의 영향도 크게 줄어들지만, 픽셀 값이 급격하게 변경되는 에지 근방에 동일한 가우시안 필터가 적용되면 잡음뿐만 아니라 에지 성분까지 함께 감소
* 잡음이 줄어들면서 함께 에지도 무뎌지기 때문에 객체의 윤곽이 흐릿하게 바뀌는 단점을 보완하기 위해 많은 사람들이 에지 정보는 그대로 유지하면서 잡음만 제거하는 에지 보전 잡음 제거 필터(edge-preserving noise removal filter)에 대해 연구하다가 1998년 토마시(C. Tomasi)가 에지 성분은 그대로 유지하면서 가우시안 잡음을 효과적으로 제거하는 양방향 필터(bilateral filter) 알고리즘 제안
* 양방향 필터는 평탄한 부분은 가우시안 필터를 이용하고, 엣지 부분이면 가우시안의 일부분만 가져와 필터링 즉, 에지가 아닌 부분에서만 블러링
